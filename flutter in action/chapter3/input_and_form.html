
<!DOCTYPE html>

<html lang="zh-cn">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3.7 è¾“å…¥æ¡†åŠè¡¨å• &#8212; flutter in action 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>3.7 è¾“å…¥æ¡†åŠè¡¨å•<a class="headerlink" href="#id1" title="Permalink to this headline">Â¶</a></h1>
<p>Materialç»„ä»¶åº“ä¸­æä¾›äº†è¾“å…¥æ¡†ç»„ä»¶<code class="docutils literal notranslate"><span class="pre">TextField</span></code>å’Œè¡¨å•ç»„ä»¶<code class="docutils literal notranslate"><span class="pre">Form</span></code>ã€‚ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ä¸€ä¸‹ã€‚</p>
<div class="section" id="textfield">
<h2>3.7.1 TextField<a class="headerlink" href="#textfield" title="Permalink to this headline">Â¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">TextField</span></code>ç”¨äºæ–‡æœ¬è¾“å…¥ï¼Œå®ƒæä¾›äº†å¾ˆå¤šå±æ€§ï¼Œæˆ‘ä»¬å…ˆç®€å•ä»‹ç»ä¸€ä¸‹ä¸»è¦å±æ€§çš„ä½œç”¨ï¼Œç„¶åé€šè¿‡å‡ ä¸ªç¤ºä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹å…³é”®å±æ€§çš„ç”¨æ³•ã€‚</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="n">TextField</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="n">TextEditingController</span> <span class="n">controller</span><span class="p">,</span> 
  <span class="n">FocusNode</span> <span class="n">focusNode</span><span class="p">,</span>
  <span class="n">InputDecoration</span> <span class="n">decoration</span> <span class="o">=</span> <span class="kd">const</span> <span class="n">InputDecoration</span><span class="p">(),</span>
  <span class="n">TextInputType</span> <span class="n">keyboardType</span><span class="p">,</span>
  <span class="n">TextInputAction</span> <span class="n">textInputAction</span><span class="p">,</span>
  <span class="n">TextStyle</span> <span class="n">style</span><span class="p">,</span>
  <span class="n">TextAlign</span> <span class="n">textAlign</span> <span class="o">=</span> <span class="n">TextAlign</span><span class="p">.</span><span class="n">start</span><span class="p">,</span>
  <span class="kt">bool</span> <span class="n">autofocus</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="kt">bool</span> <span class="n">obscureText</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="kt">int</span> <span class="n">maxLines</span> <span class="o">=</span> <span class="m">1</span><span class="p">,</span>
  <span class="kt">int</span> <span class="n">maxLength</span><span class="p">,</span>
  <span class="kt">bool</span> <span class="n">maxLengthEnforced</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="n">ValueChanged</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="n">onChanged</span><span class="p">,</span>
  <span class="n">VoidCallback</span> <span class="n">onEditingComplete</span><span class="p">,</span>
  <span class="n">ValueChanged</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="n">onSubmitted</span><span class="p">,</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">TextInputFormatter</span><span class="o">&gt;</span> <span class="n">inputFormatters</span><span class="p">,</span>
  <span class="kt">bool</span> <span class="n">enabled</span><span class="p">,</span>
  <span class="k">this</span><span class="p">.</span><span class="n">cursorWidth</span> <span class="o">=</span> <span class="m">2.0</span><span class="p">,</span>
  <span class="k">this</span><span class="p">.</span><span class="n">cursorRadius</span><span class="p">,</span>
  <span class="k">this</span><span class="p">.</span><span class="n">cursorColor</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">})</span>
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">controller</span></code>ï¼šç¼–è¾‘æ¡†çš„æ§åˆ¶å™¨ï¼Œé€šè¿‡å®ƒå¯ä»¥è®¾ç½®/è·å–ç¼–è¾‘æ¡†çš„å†…å®¹ã€é€‰æ‹©ç¼–è¾‘å†…å®¹ã€ç›‘å¬ç¼–è¾‘æ–‡æœ¬æ”¹å˜äº‹ä»¶ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½éœ€è¦æ˜¾å¼æä¾›ä¸€ä¸ª<code class="docutils literal notranslate"><span class="pre">controller</span></code>æ¥ä¸æ–‡æœ¬æ¡†äº¤äº’ã€‚å¦‚æœæ²¡æœ‰æä¾›<code class="docutils literal notranslate"><span class="pre">controller</span></code>ï¼Œåˆ™<code class="docutils literal notranslate"><span class="pre">TextField</span></code>å†…éƒ¨ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">focusNode</span></code>ï¼šç”¨äºæ§åˆ¶<code class="docutils literal notranslate"><span class="pre">TextField</span></code>æ˜¯å¦å æœ‰å½“å‰é”®ç›˜çš„è¾“å…¥ç„¦ç‚¹ã€‚å®ƒæ˜¯æˆ‘ä»¬å’Œé”®ç›˜äº¤äº’çš„ä¸€ä¸ªå¥æŸ„ï¼ˆhandleï¼‰ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InputDecoration</span></code>ï¼šç”¨äºæ§åˆ¶<code class="docutils literal notranslate"><span class="pre">TextField</span></code>çš„å¤–è§‚æ˜¾ç¤ºï¼Œå¦‚æç¤ºæ–‡æœ¬ã€èƒŒæ™¯é¢œè‰²ã€è¾¹æ¡†ç­‰ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keyboardType</span></code>ï¼šç”¨äºè®¾ç½®è¯¥è¾“å…¥æ¡†é»˜è®¤çš„é”®ç›˜è¾“å…¥ç±»å‹ï¼Œå–å€¼å¦‚ä¸‹ï¼š</p>
<p>| TextInputTypeæšä¸¾å€¼ | å«ä¹‰                                                |
| â€”â€”â€”â€”â€”â€”- | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |
| text                | æ–‡æœ¬è¾“å…¥é”®ç›˜                                        |
| multiline           | å¤šè¡Œæ–‡æœ¬ï¼Œéœ€å’ŒmaxLinesé…åˆä½¿ç”¨(è®¾ä¸ºnullæˆ–å¤§äº1)     |
| number              | æ•°å­—ï¼›ä¼šå¼¹å‡ºæ•°å­—é”®ç›˜                                |
| phone               | ä¼˜åŒ–åçš„ç”µè¯å·ç è¾“å…¥é”®ç›˜ï¼›ä¼šå¼¹å‡ºæ•°å­—é”®ç›˜å¹¶æ˜¾ç¤ºâ€œ* #â€ |
| datetime            | ä¼˜åŒ–åçš„æ—¥æœŸè¾“å…¥é”®ç›˜ï¼›Androidä¸Šä¼šæ˜¾ç¤ºâ€œ: -â€          |
| emailAddress        | ä¼˜åŒ–åçš„ç”µå­é‚®ä»¶åœ°å€ï¼›ä¼šæ˜¾ç¤ºâ€œ&#64; .â€                   |
| url                 | ä¼˜åŒ–åçš„urlè¾“å…¥é”®ç›˜ï¼› ä¼šæ˜¾ç¤ºâ€œ/ .â€                   |</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">textInputAction</span></code>ï¼šé”®ç›˜åŠ¨ä½œæŒ‰é’®å›¾æ ‡(å³å›è½¦é”®ä½å›¾æ ‡)ï¼Œå®ƒæ˜¯ä¸€ä¸ªæšä¸¾å€¼ï¼Œæœ‰å¤šä¸ªå¯é€‰å€¼ï¼Œå…¨éƒ¨çš„å–å€¼åˆ—è¡¨è¯»è€…å¯ä»¥æŸ¥çœ‹APIæ–‡æ¡£ï¼Œä¸‹é¢æ˜¯å½“å€¼ä¸º<code class="docutils literal notranslate"><span class="pre">TextInputAction.search</span></code>æ—¶ï¼ŒåŸç”ŸAndroidç³»ç»Ÿä¸‹é”®ç›˜æ ·å¼å¦‚å›¾3-24æ‰€ç¤ºï¼š</p>
<p><img alt="å›¾3-24" src="../_images/3-24.png" /></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">style</span></code>ï¼šæ­£åœ¨ç¼–è¾‘çš„æ–‡æœ¬æ ·å¼ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">textAlign</span></code>: è¾“å…¥æ¡†å†…ç¼–è¾‘æ–‡æœ¬åœ¨æ°´å¹³æ–¹å‘çš„å¯¹é½æ–¹å¼ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">autofocus</span></code>: æ˜¯å¦è‡ªåŠ¨è·å–ç„¦ç‚¹ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obscureText</span></code>ï¼šæ˜¯å¦éšè—æ­£åœ¨ç¼–è¾‘çš„æ–‡æœ¬ï¼Œå¦‚ç”¨äºè¾“å…¥å¯†ç çš„åœºæ™¯ç­‰ï¼Œæ–‡æœ¬å†…å®¹ä¼šç”¨â€œâ€¢â€æ›¿æ¢ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxLines</span></code>ï¼šè¾“å…¥æ¡†çš„æœ€å¤§è¡Œæ•°ï¼Œé»˜è®¤ä¸º1ï¼›å¦‚æœä¸º<code class="docutils literal notranslate"><span class="pre">null</span></code>ï¼Œåˆ™æ— è¡Œæ•°é™åˆ¶ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxLength</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">maxLengthEnforced</span></code> ï¼š<code class="docutils literal notranslate"><span class="pre">maxLength</span></code>ä»£è¡¨è¾“å…¥æ¡†æ–‡æœ¬çš„æœ€å¤§é•¿åº¦ï¼Œè®¾ç½®åè¾“å…¥æ¡†å³ä¸‹è§’ä¼šæ˜¾ç¤ºè¾“å…¥çš„æ–‡æœ¬è®¡æ•°ã€‚<code class="docutils literal notranslate"><span class="pre">maxLengthEnforced</span></code>å†³å®šå½“è¾“å…¥æ–‡æœ¬é•¿åº¦è¶…è¿‡<code class="docutils literal notranslate"><span class="pre">maxLength</span></code>æ—¶æ˜¯å¦é˜»æ­¢è¾“å…¥ï¼Œä¸º<code class="docutils literal notranslate"><span class="pre">true</span></code>æ—¶ä¼šé˜»æ­¢è¾“å…¥ï¼Œä¸º<code class="docutils literal notranslate"><span class="pre">false</span></code>æ—¶ä¸ä¼šé˜»æ­¢è¾“å…¥ä½†è¾“å…¥æ¡†ä¼šå˜çº¢ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onChange</span></code>ï¼šè¾“å…¥æ¡†å†…å®¹æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ï¼›æ³¨ï¼šå†…å®¹æ”¹å˜äº‹ä»¶ä¹Ÿå¯ä»¥é€šè¿‡<code class="docutils literal notranslate"><span class="pre">controller</span></code>æ¥ç›‘å¬ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onEditingComplete</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">onSubmitted</span></code>ï¼šè¿™ä¸¤ä¸ªå›è°ƒéƒ½æ˜¯åœ¨è¾“å…¥æ¡†è¾“å…¥å®Œæˆæ—¶è§¦å‘ï¼Œæ¯”å¦‚æŒ‰äº†é”®ç›˜çš„å®Œæˆé”®ï¼ˆå¯¹å·å›¾æ ‡ï¼‰æˆ–æœç´¢é”®ï¼ˆğŸ”å›¾æ ‡ï¼‰ã€‚ä¸åŒçš„æ˜¯ä¸¤ä¸ªå›è°ƒç­¾åä¸åŒï¼Œ<code class="docutils literal notranslate"><span class="pre">onSubmitted</span></code>å›è°ƒæ˜¯<code class="docutils literal notranslate"><span class="pre">ValueChanged&lt;String&gt;</span></code>ç±»å‹ï¼Œå®ƒæ¥æ”¶å½“å‰è¾“å…¥å†…å®¹åšä¸ºå‚æ•°ï¼Œè€Œ<code class="docutils literal notranslate"><span class="pre">onEditingComplete</span></code>ä¸æ¥æ”¶å‚æ•°ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inputFormatters</span></code>ï¼šç”¨äºæŒ‡å®šè¾“å…¥æ ¼å¼ï¼›å½“ç”¨æˆ·è¾“å…¥å†…å®¹æ”¹å˜æ—¶ï¼Œä¼šæ ¹æ®æŒ‡å®šçš„æ ¼å¼æ¥æ ¡éªŒã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enable</span></code>ï¼šå¦‚æœä¸º<code class="docutils literal notranslate"><span class="pre">false</span></code>ï¼Œåˆ™è¾“å…¥æ¡†ä¼šè¢«ç¦ç”¨ï¼Œç¦ç”¨çŠ¶æ€ä¸æ¥æ”¶è¾“å…¥å’Œäº‹ä»¶ï¼ŒåŒæ—¶æ˜¾ç¤ºç¦ç”¨æ€æ ·å¼ï¼ˆåœ¨å…¶<code class="docutils literal notranslate"><span class="pre">decoration</span></code>ä¸­å®šä¹‰ï¼‰ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cursorWidth</span></code>ã€<code class="docutils literal notranslate"><span class="pre">cursorRadius</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">cursorColor</span></code>ï¼šè¿™ä¸‰ä¸ªå±æ€§æ˜¯ç”¨äºè‡ªå®šä¹‰è¾“å…¥æ¡†å…‰æ ‡å®½åº¦ã€åœ†è§’å’Œé¢œè‰²çš„ã€‚</p></li>
</ul>
<div class="section" id="id2">
<h3>ç¤ºä¾‹ï¼šç™»å½•è¾“å…¥æ¡†<a class="headerlink" href="#id2" title="Permalink to this headline">Â¶</a></h3>
<div class="section" id="id3">
<h4>å¸ƒå±€<a class="headerlink" href="#id3" title="Permalink to this headline">Â¶</a></h4>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">Column</span><span class="p">(</span>
        <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span><span class="p">[</span>
          <span class="n">TextField</span><span class="p">(</span>
            <span class="nl">autofocus:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
                <span class="nl">labelText:</span> <span class="s2">&quot;ç”¨æˆ·å&quot;</span><span class="p">,</span>
                <span class="nl">hintText:</span> <span class="s2">&quot;ç”¨æˆ·åæˆ–é‚®ç®±&quot;</span><span class="p">,</span>
                <span class="nl">prefixIcon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">person</span><span class="p">)</span>
            <span class="p">),</span>
          <span class="p">),</span>
          <span class="n">TextField</span><span class="p">(</span>
            <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
                <span class="nl">labelText:</span> <span class="s2">&quot;å¯†ç &quot;</span><span class="p">,</span>
                <span class="nl">hintText:</span> <span class="s2">&quot;æ‚¨çš„ç™»å½•å¯†ç &quot;</span><span class="p">,</span>
                <span class="nl">prefixIcon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">lock</span><span class="p">)</span>
            <span class="p">),</span>
            <span class="nl">obscureText:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="p">),</span>
        <span class="p">],</span>
<span class="p">);</span>
</pre></div>
</div>
<p>è¿è¡Œåï¼Œæ•ˆæœå¦‚å›¾3-25æ‰€ç¤ºï¼š</p>
<p><img alt="å›¾3-25" src="../_images/3-25.png" /></p>
</div>
<div class="section" id="id4">
<h4>è·å–è¾“å…¥å†…å®¹<a class="headerlink" href="#id4" title="Permalink to this headline">Â¶</a></h4>
<p>è·å–è¾“å…¥å†…å®¹æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ol class="simple">
<li><p>å®šä¹‰ä¸¤ä¸ªå˜é‡ï¼Œç”¨äºä¿å­˜ç”¨æˆ·åå’Œå¯†ç ï¼Œç„¶ååœ¨<code class="docutils literal notranslate"><span class="pre">onChange</span></code>è§¦å‘æ—¶ï¼Œå„è‡ªä¿å­˜ä¸€ä¸‹è¾“å…¥å†…å®¹ã€‚</p></li>
<li><p>é€šè¿‡<code class="docutils literal notranslate"><span class="pre">controller</span></code>ç›´æ¥è·å–ã€‚</p></li>
</ol>
<p>ç¬¬ä¸€ç§æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œä¸åœ¨ä¸¾ä¾‹ï¼Œæˆ‘ä»¬æ¥é‡ç‚¹çœ‹ä¸€ä¸‹ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬ä»¥ç”¨æˆ·åè¾“å…¥æ¡†ä¸¾ä¾‹ï¼š</p>
<p>å®šä¹‰ä¸€ä¸ª<code class="docutils literal notranslate"><span class="pre">controller</span></code>ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="c1">//å®šä¹‰ä¸€ä¸ªcontroller</span>
<span class="n">TextEditingController</span> <span class="n">_unameController</span> <span class="o">=</span> <span class="n">TextEditingController</span><span class="p">();</span>
</pre></div>
</div>
<p>ç„¶åè®¾ç½®è¾“å…¥æ¡†controllerï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">TextField</span><span class="p">(</span>
    <span class="nl">autofocus:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nl">controller:</span> <span class="n">_unameController</span><span class="p">,</span> <span class="c1">//è®¾ç½®controller</span>
    <span class="p">...</span>
<span class="p">)</span>
</pre></div>
</div>
<p>é€šè¿‡controllerè·å–è¾“å…¥æ¡†å†…å®¹</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">print</span><span class="p">(</span><span class="n">_unameController</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h4>ç›‘å¬æ–‡æœ¬å˜åŒ–<a class="headerlink" href="#id5" title="Permalink to this headline">Â¶</a></h4>
<p>ç›‘å¬æ–‡æœ¬å˜åŒ–ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li><p>è®¾ç½®<code class="docutils literal notranslate"><span class="pre">onChange</span></code>å›è°ƒï¼Œå¦‚ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">TextField</span><span class="p">(</span>
    <span class="nl">autofocus:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nl">onChanged:</span> <span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">print</span><span class="p">(</span><span class="s2">&quot;onChange: </span><span class="si">$</span><span class="n">v</span><span class="s2">&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>é€šè¿‡<code class="docutils literal notranslate"><span class="pre">controller</span></code>ç›‘å¬ï¼Œå¦‚ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>@override
void initState() {
  //ç›‘å¬è¾“å…¥æ”¹å˜  
  _unameController.addListener((){
    print(_unameController.text);
  });
}
</pre></div>
</div>
</li>
</ol>
<p>ä¸¤ç§æ–¹å¼ç›¸æ¯”ï¼Œ<code class="docutils literal notranslate"><span class="pre">onChanged</span></code>æ˜¯ä¸“é—¨ç”¨äºç›‘å¬æ–‡æœ¬å˜åŒ–ï¼Œè€Œ<code class="docutils literal notranslate"><span class="pre">controller</span></code>çš„åŠŸèƒ½å´å¤šä¸€äº›ï¼Œé™¤äº†èƒ½ç›‘å¬æ–‡æœ¬å˜åŒ–å¤–ï¼Œå®ƒè¿˜å¯ä»¥è®¾ç½®é»˜è®¤å€¼ã€é€‰æ‹©æ–‡æœ¬ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>åˆ›å»ºä¸€ä¸ª<code class="docutils literal notranslate"><span class="pre">controller</span></code>:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">TextEditingController</span> <span class="n">_selectionController</span> <span class="o">=</span>  <span class="n">TextEditingController</span><span class="p">();</span>
</pre></div>
</div>
<p>è®¾ç½®é»˜è®¤å€¼ï¼Œå¹¶ä»ç¬¬ä¸‰ä¸ªå­—ç¬¦å¼€å§‹é€‰ä¸­åé¢çš„å­—ç¬¦</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">_selectionController</span><span class="p">.</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;hello world!&quot;</span><span class="p">;</span>
<span class="n">_selectionController</span><span class="p">.</span><span class="n">selection</span><span class="o">=</span><span class="n">TextSelection</span><span class="p">(</span>
    <span class="nl">baseOffset:</span> <span class="m">2</span><span class="p">,</span>
    <span class="nl">extentOffset:</span> <span class="n">_selectionController</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">length</span>
<span class="p">);</span>
</pre></div>
</div>
<p>è®¾ç½®<code class="docutils literal notranslate"><span class="pre">controlle</span></code>r:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">TextField</span><span class="p">(</span>
  <span class="nl">controller:</span> <span class="n">_selectionController</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>è¿è¡Œæ•ˆæœå¦‚å›¾3-26æ‰€ç¤ºï¼š</p>
<p><img alt="å›¾3-26" src="../_images/3-26.png" /></p>
</div>
<div class="section" id="id6">
<h4>æ§åˆ¶ç„¦ç‚¹<a class="headerlink" href="#id6" title="Permalink to this headline">Â¶</a></h4>
<p>ç„¦ç‚¹å¯ä»¥é€šè¿‡<code class="docutils literal notranslate"><span class="pre">FocusNode</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">FocusScopeNode</span></code>æ¥æ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œç„¦ç‚¹ç”±<code class="docutils literal notranslate"><span class="pre">FocusScope</span></code>æ¥ç®¡ç†ï¼Œå®ƒä»£è¡¨ç„¦ç‚¹æ§åˆ¶èŒƒå›´ï¼Œå¯ä»¥åœ¨è¿™ä¸ªèŒƒå›´å†…å¯ä»¥é€šè¿‡<code class="docutils literal notranslate"><span class="pre">FocusScopeNode</span></code>åœ¨è¾“å…¥æ¡†ä¹‹é—´ç§»åŠ¨ç„¦ç‚¹ã€è®¾ç½®é»˜è®¤ç„¦ç‚¹ç­‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code class="docutils literal notranslate"><span class="pre">FocusScope.of(context)</span></code> æ¥è·å–Widgetæ ‘ä¸­é»˜è®¤çš„<code class="docutils literal notranslate"><span class="pre">FocusScopeNode</span></code>ã€‚ä¸‹é¢çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œåœ¨æ­¤ç¤ºä¾‹ä¸­åˆ›å»ºä¸¤ä¸ª<code class="docutils literal notranslate"><span class="pre">TextField</span></code>ï¼Œç¬¬ä¸€ä¸ªè‡ªåŠ¨è·å–ç„¦ç‚¹ï¼Œç„¶ååˆ›å»ºä¸¤ä¸ªæŒ‰é’®ï¼š</p>
<ul class="simple">
<li><p>ç‚¹å‡»ç¬¬ä¸€ä¸ªæŒ‰é’®å¯ä»¥å°†ç„¦ç‚¹ä»ç¬¬ä¸€ä¸ª<code class="docutils literal notranslate"><span class="pre">TextField</span></code>æŒªåˆ°ç¬¬äºŒä¸ª<code class="docutils literal notranslate"><span class="pre">TextField</span></code>ã€‚</p></li>
<li><p>ç‚¹å‡»ç¬¬äºŒä¸ªæŒ‰é’®å¯ä»¥å…³é—­é”®ç›˜ã€‚</p></li>
</ul>
<p>æˆ‘ä»¬è¦å®ç°çš„æ•ˆæœå¦‚å›¾3-27æ‰€ç¤ºï¼š</p>
<p><img alt="å›¾3-27" src="../_images/3-27.png" /></p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>class FocusTestRoute extends StatefulWidget {
  @override
  _FocusTestRouteState createState() =&gt; new _FocusTestRouteState();
}

class _FocusTestRouteState extends State&lt;FocusTestRoute&gt; {
  FocusNode focusNode1 = new FocusNode();
  FocusNode focusNode2 = new FocusNode();
  FocusScopeNode focusScopeNode;

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: EdgeInsets.all(16.0),
      child: Column(
        children: &lt;Widget&gt;[
          TextField(
            autofocus: true, 
            focusNode: focusNode1,//å…³è”focusNode1
            decoration: InputDecoration(
                labelText: &quot;input1&quot;
            ),
          ),
          TextField(
            focusNode: focusNode2,//å…³è”focusNode2
            decoration: InputDecoration(
                labelText: &quot;input2&quot;
            ),
          ),
          Builder(builder: (ctx) {
            return Column(
              children: &lt;Widget&gt;[
                RaisedButton(
                  child: Text(&quot;ç§»åŠ¨ç„¦ç‚¹&quot;),
                  onPressed: () {
                    //å°†ç„¦ç‚¹ä»ç¬¬ä¸€ä¸ªTextFieldç§»åˆ°ç¬¬äºŒä¸ªTextField
                    // è¿™æ˜¯ä¸€ç§å†™æ³• FocusScope.of(context).requestFocus(focusNode2);
                    // è¿™æ˜¯ç¬¬äºŒç§å†™æ³•
                    if(null == focusScopeNode){
                      focusScopeNode = FocusScope.of(context);
                    }
                    focusScopeNode.requestFocus(focusNode2);
                  },
                ),
                RaisedButton(
                  child: Text(&quot;éšè—é”®ç›˜&quot;),
                  onPressed: () {
                    // å½“æ‰€æœ‰ç¼–è¾‘æ¡†éƒ½å¤±å»ç„¦ç‚¹æ—¶é”®ç›˜å°±ä¼šæ”¶èµ·  
                    focusNode1.unfocus();
                    focusNode2.unfocus();
                  },
                ),
              ],
            );
          },
          ),
        ],
      ),
    );
  }

}
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">FocusNode</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">FocusScopeNode</span></code>è¿˜æœ‰ä¸€äº›å…¶å®ƒçš„æ–¹æ³•ï¼Œè¯¦æƒ…å¯ä»¥æŸ¥çœ‹APIæ–‡æ¡£ã€‚</p>
</div>
<div class="section" id="id7">
<h4>ç›‘å¬ç„¦ç‚¹çŠ¶æ€æ”¹å˜äº‹ä»¶<a class="headerlink" href="#id7" title="Permalink to this headline">Â¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">FocusNode</span></code>ç»§æ‰¿è‡ª<code class="docutils literal notranslate"><span class="pre">ChangeNotifier</span></code>ï¼Œé€šè¿‡<code class="docutils literal notranslate"><span class="pre">FocusNode</span></code>å¯ä»¥ç›‘å¬ç„¦ç‚¹çš„æ”¹å˜äº‹ä»¶ï¼Œå¦‚ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="p">...</span>
<span class="c1">// åˆ›å»º focusNode   </span>
<span class="n">FocusNode</span> <span class="n">focusNode</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FocusNode</span><span class="p">();</span>
<span class="p">...</span>
<span class="c1">// focusNodeç»‘å®šè¾“å…¥æ¡†   </span>
<span class="n">TextField</span><span class="p">(</span><span class="nl">focusNode:</span> <span class="n">focusNode</span><span class="p">);</span>
<span class="p">...</span>
<span class="c1">// ç›‘å¬ç„¦ç‚¹å˜åŒ–    </span>
<span class="n">focusNode</span><span class="p">.</span><span class="n">addListener</span><span class="p">((){</span>
   <span class="n">print</span><span class="p">(</span><span class="n">focusNode</span><span class="p">.</span><span class="n">hasFocus</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>è·å¾—ç„¦ç‚¹æ—¶<code class="docutils literal notranslate"><span class="pre">focusNode.hasFocus</span></code>å€¼ä¸º<code class="docutils literal notranslate"><span class="pre">true</span></code>ï¼Œå¤±å»ç„¦ç‚¹æ—¶ä¸º<code class="docutils literal notranslate"><span class="pre">false</span></code>ã€‚</p>
</div>
<div class="section" id="id8">
<h4>è‡ªå®šä¹‰æ ·å¼<a class="headerlink" href="#id8" title="Permalink to this headline">Â¶</a></h4>
<p>è™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡<code class="docutils literal notranslate"><span class="pre">decoration</span></code>å±æ€§æ¥å®šä¹‰è¾“å…¥æ¡†æ ·å¼ï¼Œä¸‹é¢ä»¥è‡ªå®šä¹‰è¾“å…¥æ¡†ä¸‹åˆ’çº¿é¢œè‰²ä¸ºä¾‹æ¥ä»‹ç»ä¸€ä¸‹ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">TextField</span><span class="p">(</span>
  <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
    <span class="nl">labelText:</span> <span class="s2">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span><span class="p">,</span>
    <span class="nl">prefixIcon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">person</span><span class="p">),</span>
    <span class="c1">// æœªè·å¾—ç„¦ç‚¹ä¸‹åˆ’çº¿è®¾ä¸ºç°è‰²</span>
    <span class="nl">enabledBorder:</span> <span class="n">UnderlineInputBorder</span><span class="p">(</span>
      <span class="nl">borderSide:</span> <span class="n">BorderSide</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">grey</span><span class="p">),</span>
    <span class="p">),</span>
    <span class="c1">//è·å¾—ç„¦ç‚¹ä¸‹åˆ’çº¿è®¾ä¸ºè“è‰²</span>
    <span class="nl">focusedBorder:</span> <span class="n">UnderlineInputBorder</span><span class="p">(</span>
      <span class="nl">borderSide:</span> <span class="n">BorderSide</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">blue</span><span class="p">),</span>
    <span class="p">),</span>
  <span class="p">),</span>
<span class="p">),</span>
</pre></div>
</div>
<p>ä¸Šé¢ä»£ç æˆ‘ä»¬ç›´æ¥é€šè¿‡InputDecorationçš„enabledBorderå’ŒfocusedBorderæ¥åˆ†åˆ«è®¾ç½®äº†è¾“å…¥æ¡†åœ¨æœªè·å–ç„¦ç‚¹å’Œè·å¾—ç„¦ç‚¹åçš„ä¸‹åˆ’çº¿é¢œè‰²ã€‚å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸»é¢˜æ¥è‡ªå®šä¹‰è¾“å…¥æ¡†çš„æ ·å¼ï¼Œä¸‹é¢æˆ‘ä»¬æ¢ç´¢ä¸€ä¸‹å¦‚ä½•åœ¨ä¸ä½¿ç”¨enabledBorderå’ŒfocusedBorderçš„æƒ…å†µä¸‹æ¥è‡ªå®šä¹‰ä¸‹æ»‘çº¿é¢œè‰²ã€‚</p>
<p>ç”±äº<code class="docutils literal notranslate"><span class="pre">TextField</span></code>åœ¨ç»˜åˆ¶ä¸‹åˆ’çº¿æ—¶ä½¿ç”¨çš„é¢œè‰²æ˜¯ä¸»é¢˜è‰²é‡Œé¢çš„<code class="docutils literal notranslate"><span class="pre">hintColor</span></code>ï¼Œä½†æç¤ºæ–‡æœ¬é¢œè‰²ä¹Ÿæ˜¯ç”¨çš„<code class="docutils literal notranslate"><span class="pre">hintColor</span></code>ï¼Œ å¦‚æœæˆ‘ä»¬ç›´æ¥ä¿®æ”¹<code class="docutils literal notranslate"><span class="pre">hintColor</span></code>ï¼Œé‚£ä¹ˆä¸‹åˆ’çº¿å’Œæç¤ºæ–‡æœ¬çš„é¢œè‰²éƒ½ä¼šå˜ã€‚å€¼å¾—é«˜å…´çš„æ˜¯<code class="docutils literal notranslate"><span class="pre">decoration</span></code>ä¸­å¯ä»¥è®¾ç½®<code class="docutils literal notranslate"><span class="pre">hintStyle</span></code>ï¼Œå®ƒå¯ä»¥è¦†ç›–<code class="docutils literal notranslate"><span class="pre">hintColor</span></code>ï¼Œå¹¶ä¸”ä¸»é¢˜ä¸­å¯ä»¥é€šè¿‡<code class="docutils literal notranslate"><span class="pre">inputDecorationTheme</span></code>æ¥è®¾ç½®è¾“å…¥æ¡†é»˜è®¤çš„<code class="docutils literal notranslate"><span class="pre">decoration</span></code>ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸»é¢˜æ¥è‡ªå®šä¹‰ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">Theme</span><span class="p">(</span>
  <span class="nl">data:</span> <span class="n">Theme</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">copyWith</span><span class="p">(</span>
      <span class="nl">hintColor:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">grey</span><span class="p">[</span><span class="m">200</span><span class="p">],</span> <span class="c1">//å®šä¹‰ä¸‹åˆ’çº¿é¢œè‰²</span>
      <span class="nl">inputDecorationTheme:</span> <span class="n">InputDecorationTheme</span><span class="p">(</span>
          <span class="nl">labelStyle:</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">grey</span><span class="p">),</span><span class="c1">//å®šä¹‰labelå­—ä½“æ ·å¼</span>
          <span class="nl">hintStyle:</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">grey</span><span class="p">,</span> <span class="nl">fontSize:</span> <span class="m">14.0</span><span class="p">)</span><span class="c1">//å®šä¹‰æç¤ºæ–‡æœ¬æ ·å¼</span>
      <span class="p">)</span>
  <span class="p">),</span>
  <span class="nl">child:</span> <span class="n">Column</span><span class="p">(</span>
    <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span><span class="p">[</span>
      <span class="n">TextField</span><span class="p">(</span>
        <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
            <span class="nl">labelText:</span> <span class="s2">&quot;ç”¨æˆ·å&quot;</span><span class="p">,</span>
            <span class="nl">hintText:</span> <span class="s2">&quot;ç”¨æˆ·åæˆ–é‚®ç®±&quot;</span><span class="p">,</span>
            <span class="nl">prefixIcon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">person</span><span class="p">)</span>
        <span class="p">),</span>
      <span class="p">),</span>
      <span class="n">TextField</span><span class="p">(</span>
        <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
            <span class="nl">prefixIcon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">lock</span><span class="p">),</span>
            <span class="nl">labelText:</span> <span class="s2">&quot;å¯†ç &quot;</span><span class="p">,</span>
            <span class="nl">hintText:</span> <span class="s2">&quot;æ‚¨çš„ç™»å½•å¯†ç &quot;</span><span class="p">,</span>
            <span class="nl">hintStyle:</span> <span class="n">TextStyle</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">grey</span><span class="p">,</span> <span class="nl">fontSize:</span> <span class="m">13.0</span><span class="p">)</span>
        <span class="p">),</span>
        <span class="nl">obscureText:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="p">)</span>
    <span class="p">],</span>
  <span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>è¿è¡Œæ•ˆæœå¦‚å›¾3-28æ‰€ç¤ºï¼š</p>
<p><img alt="å›¾3-28" src="../_images/3-28.png" /></p>
<p>æˆ‘ä»¬æˆåŠŸçš„è‡ªå®šä¹‰äº†ä¸‹åˆ’çº¿é¢œè‰²å’Œæé—®æ–‡å­—æ ·å¼ï¼Œç»†å¿ƒçš„è¯»è€…å¯èƒ½å·²ç»å‘ç°ï¼Œé€šè¿‡è¿™ç§æ–¹å¼è‡ªå®šä¹‰åï¼Œè¾“å…¥æ¡†åœ¨è·å–ç„¦ç‚¹æ—¶ï¼Œ<code class="docutils literal notranslate"><span class="pre">labelText</span></code>ä¸ä¼šé«˜äº®æ˜¾ç¤ºäº†ï¼Œæ­£å¦‚ä¸Šå›¾ä¸­çš„â€ç”¨æˆ·åâ€æœ¬åº”è¯¥æ˜¾ç¤ºè“è‰²ï¼Œä½†ç°åœ¨å´æ˜¾ç¤ºä¸ºç°è‰²ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜æ˜¯æ— æ³•å®šä¹‰ä¸‹åˆ’çº¿å®½åº¦ã€‚å¦ä¸€ç§çµæ´»çš„æ–¹å¼æ˜¯ç›´æ¥éšè—æ‰<code class="docutils literal notranslate"><span class="pre">TextField</span></code>æœ¬èº«çš„ä¸‹åˆ’çº¿ï¼Œç„¶åé€šè¿‡<code class="docutils literal notranslate"><span class="pre">Container</span></code>å»åµŒå¥—å®šä¹‰æ ·å¼ï¼Œå¦‚:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">Container</span><span class="p">(</span>
  <span class="nl">child:</span> <span class="n">TextField</span><span class="p">(</span>
    <span class="nl">keyboardType:</span> <span class="n">TextInputType</span><span class="p">.</span><span class="n">emailAddress</span><span class="p">,</span>
    <span class="nl">decoration:</span> <span class="n">InputDecoration</span><span class="p">(</span>
        <span class="nl">labelText:</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span>
        <span class="nl">hintText:</span> <span class="s2">&quot;ç”µå­é‚®ä»¶åœ°å€&quot;</span><span class="p">,</span>
        <span class="nl">prefixIcon:</span> <span class="n">Icon</span><span class="p">(</span><span class="n">Icons</span><span class="p">.</span><span class="n">email</span><span class="p">),</span>
        <span class="nl">border:</span> <span class="n">InputBorder</span><span class="p">.</span><span class="n">none</span> <span class="c1">//éšè—ä¸‹åˆ’çº¿</span>
    <span class="p">)</span>
  <span class="p">),</span>
  <span class="nl">decoration:</span> <span class="n">BoxDecoration</span><span class="p">(</span>
      <span class="c1">// ä¸‹æ»‘çº¿æµ…ç°è‰²ï¼Œå®½åº¦1åƒç´ </span>
      <span class="nl">border:</span> <span class="n">Border</span><span class="p">(</span><span class="nl">bottom:</span> <span class="n">BorderSide</span><span class="p">(</span><span class="nl">color:</span> <span class="n">Colors</span><span class="p">.</span><span class="n">grey</span><span class="p">[</span><span class="m">200</span><span class="p">],</span> <span class="nl">width:</span> <span class="m">1.0</span><span class="p">))</span>
  <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img alt="image-20180904150511545" src="https://cdn.jsdelivr.net/gh/flutterchina/flutter-in-action&#64;1.0/docs/imgs/image-20180904150511545.png" /></p>
<p>é€šè¿‡è¿™ç§ç»„ä»¶ç»„åˆçš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥å®šä¹‰èƒŒæ™¯åœ†è§’ç­‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œä¼˜å…ˆé€šè¿‡<code class="docutils literal notranslate"><span class="pre">decoration</span></code>æ¥è‡ªå®šä¹‰æ ·å¼ï¼Œå¦‚æœ<code class="docutils literal notranslate"><span class="pre">decoration</span></code>å®ç°ä¸äº†ï¼Œå†ç”¨widgetç»„åˆçš„æ–¹å¼ã€‚</p>
<blockquote>
<div><p>æ€è€ƒé¢˜ï¼šåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸‹åˆ’çº¿é¢œè‰²æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥è·å¾—ç„¦ç‚¹åé¢œè‰²ä»ç„¶ä¸ºç°è‰²ï¼Œå¦‚ä½•å®ç°ç‚¹å‡»åä¸‹æ»‘çº¿ä¹Ÿå˜è‰²å‘¢ï¼Ÿ</p>
</div></blockquote>
</div>
</div>
</div>
<div class="section" id="form">
<h2>3.7.2 è¡¨å•Form<a class="headerlink" href="#form" title="Permalink to this headline">Â¶</a></h2>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼Œåœ¨æ­£å¼å‘æœåŠ¡å™¨æäº¤æ•°æ®å‰ï¼Œéƒ½ä¼šå¯¹å„ä¸ªè¾“å…¥æ¡†æ•°æ®è¿›è¡Œåˆæ³•æ€§æ ¡éªŒï¼Œä½†æ˜¯å¯¹æ¯ä¸€ä¸ª<code class="docutils literal notranslate"><span class="pre">TextField</span></code>éƒ½åˆ†åˆ«è¿›è¡Œæ ¡éªŒå°†ä¼šæ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹ã€‚è¿˜æœ‰ï¼Œå¦‚æœç”¨æˆ·æƒ³æ¸…é™¤ä¸€ç»„<code class="docutils literal notranslate"><span class="pre">TextField</span></code>çš„å†…å®¹ï¼Œé™¤äº†ä¸€ä¸ªä¸€ä¸ªæ¸…é™¤æœ‰æ²¡æœ‰ä»€ä¹ˆæ›´å¥½çš„åŠæ³•å‘¢ï¼Ÿä¸ºæ­¤ï¼ŒFlutteræä¾›äº†ä¸€ä¸ª<code class="docutils literal notranslate"><span class="pre">Form</span></code> ç»„ä»¶ï¼Œå®ƒå¯ä»¥å¯¹è¾“å…¥æ¡†è¿›è¡Œåˆ†ç»„ï¼Œç„¶åè¿›è¡Œä¸€äº›ç»Ÿä¸€æ“ä½œï¼Œå¦‚è¾“å…¥å†…å®¹æ ¡éªŒã€è¾“å…¥æ¡†é‡ç½®ä»¥åŠè¾“å…¥å†…å®¹ä¿å­˜ã€‚</p>
<div class="section" id="id9">
<h3>Form<a class="headerlink" href="#id9" title="Permalink to this headline">Â¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Form</span></code>ç»§æ‰¿è‡ª<code class="docutils literal notranslate"><span class="pre">StatefulWidget</span></code>å¯¹è±¡ï¼Œå®ƒå¯¹åº”çš„çŠ¶æ€ç±»ä¸º<code class="docutils literal notranslate"><span class="pre">FormState</span></code>ã€‚æˆ‘ä»¬å…ˆçœ‹çœ‹<code class="docutils literal notranslate"><span class="pre">Form</span></code>ç±»çš„å®šä¹‰ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>Form({
  @required Widget child,
  bool autovalidate = false,
  WillPopCallback onWillPop,
  VoidCallback onChanged,
})
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">autovalidate</span></code>ï¼šæ˜¯å¦è‡ªåŠ¨æ ¡éªŒè¾“å…¥å†…å®¹ï¼›å½“ä¸º<code class="docutils literal notranslate"><span class="pre">true</span></code>æ—¶ï¼Œæ¯ä¸€ä¸ªå­FormFieldå†…å®¹å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šè‡ªåŠ¨æ ¡éªŒåˆæ³•æ€§ï¼Œå¹¶ç›´æ¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚å¦åˆ™ï¼Œéœ€è¦é€šè¿‡è°ƒç”¨<code class="docutils literal notranslate"><span class="pre">FormState.validate()</span></code>æ¥æ‰‹åŠ¨æ ¡éªŒã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onWillPop</span></code>ï¼šå†³å®š<code class="docutils literal notranslate"><span class="pre">Form</span></code>æ‰€åœ¨çš„è·¯ç”±æ˜¯å¦å¯ä»¥ç›´æ¥è¿”å›ï¼ˆå¦‚ç‚¹å‡»è¿”å›æŒ‰é’®ï¼‰ï¼Œè¯¥å›è°ƒè¿”å›ä¸€ä¸ª<code class="docutils literal notranslate"><span class="pre">Future</span></code>å¯¹è±¡ï¼Œå¦‚æœFutureçš„æœ€ç»ˆç»“æœæ˜¯<code class="docutils literal notranslate"><span class="pre">false</span></code>ï¼Œåˆ™å½“å‰è·¯ç”±ä¸ä¼šè¿”å›ï¼›å¦‚æœä¸º<code class="docutils literal notranslate"><span class="pre">true</span></code>ï¼Œåˆ™ä¼šè¿”å›åˆ°ä¸Šä¸€ä¸ªè·¯ç”±ã€‚æ­¤å±æ€§é€šå¸¸ç”¨äºæ‹¦æˆªè¿”å›æŒ‰é’®ã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onChanged</span></code>ï¼š<code class="docutils literal notranslate"><span class="pre">Form</span></code>çš„ä»»æ„ä¸€ä¸ªå­<code class="docutils literal notranslate"><span class="pre">FormField</span></code>å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘æ­¤å›è°ƒã€‚</p></li>
</ul>
</div>
<div class="section" id="formfield">
<h3>FormField<a class="headerlink" href="#formfield" title="Permalink to this headline">Â¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Form</span></code>çš„å­å­™å…ƒç´ å¿…é¡»æ˜¯<code class="docutils literal notranslate"><span class="pre">FormField</span></code>ç±»å‹ï¼Œ<code class="docutils literal notranslate"><span class="pre">FormField</span></code>æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰å‡ ä¸ªå±æ€§ï¼Œ<code class="docutils literal notranslate"><span class="pre">FormState</span></code>å†…éƒ¨é€šè¿‡å®ƒä»¬æ¥å®Œæˆæ“ä½œï¼Œ<code class="docutils literal notranslate"><span class="pre">FormField</span></code>éƒ¨åˆ†å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="n">FormField</span><span class="p">({</span>
  <span class="p">...</span>
  <span class="n">FormFieldSetter</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">onSaved</span><span class="p">,</span> <span class="c1">//ä¿å­˜å›è°ƒ</span>
  <span class="n">FormFieldValidator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>  <span class="n">validator</span><span class="p">,</span> <span class="c1">//éªŒè¯å›è°ƒ</span>
  <span class="n">T</span> <span class="n">initialValue</span><span class="p">,</span> <span class="c1">//åˆå§‹å€¼</span>
  <span class="kt">bool</span> <span class="n">autovalidate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">//æ˜¯å¦è‡ªåŠ¨æ ¡éªŒã€‚</span>
<span class="p">})</span>
</pre></div>
</div>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼ŒFlutteræä¾›äº†ä¸€ä¸ª<code class="docutils literal notranslate"><span class="pre">TextFormField</span></code>ç»„ä»¶ï¼Œå®ƒç»§æ‰¿è‡ª<code class="docutils literal notranslate"><span class="pre">FormField</span></code>ç±»ï¼Œä¹Ÿæ˜¯<code class="docutils literal notranslate"><span class="pre">TextField</span></code>çš„ä¸€ä¸ªåŒ…è£…ç±»ï¼Œæ‰€ä»¥é™¤äº†<code class="docutils literal notranslate"><span class="pre">FormField</span></code>å®šä¹‰çš„å±æ€§ä¹‹å¤–ï¼Œå®ƒè¿˜åŒ…æ‹¬<code class="docutils literal notranslate"><span class="pre">TextField</span></code>çš„å±æ€§ã€‚</p>
</div>
<div class="section" id="formstate">
<h3>FormState<a class="headerlink" href="#formstate" title="Permalink to this headline">Â¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">FormState</span></code>ä¸º<code class="docutils literal notranslate"><span class="pre">Form</span></code>çš„<code class="docutils literal notranslate"><span class="pre">State</span></code>ç±»ï¼Œå¯ä»¥é€šè¿‡<code class="docutils literal notranslate"><span class="pre">Form.of()</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">GlobalKey</span></code>è·å¾—ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥å¯¹<code class="docutils literal notranslate"><span class="pre">Form</span></code>çš„å­å­™<code class="docutils literal notranslate"><span class="pre">FormField</span></code>è¿›è¡Œç»Ÿä¸€æ“ä½œã€‚æˆ‘ä»¬çœ‹çœ‹å…¶å¸¸ç”¨çš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FormState.validate()</span></code>ï¼šè°ƒç”¨æ­¤æ–¹æ³•åï¼Œä¼šè°ƒç”¨<code class="docutils literal notranslate"><span class="pre">Form</span></code>å­å­™<code class="docutils literal notranslate"><span class="pre">FormFieldçš„validate</span></code>å›è°ƒï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ ¡éªŒå¤±è´¥ï¼Œåˆ™è¿”å›falseï¼Œæ‰€æœ‰æ ¡éªŒå¤±è´¥é¡¹éƒ½ä¼šè¿”å›ç”¨æˆ·è¿”å›çš„é”™è¯¯æç¤ºã€‚</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FormState.save()</span></code>ï¼šè°ƒç”¨æ­¤æ–¹æ³•åï¼Œä¼šè°ƒç”¨<code class="docutils literal notranslate"><span class="pre">Form</span></code>å­å­™<code class="docutils literal notranslate"><span class="pre">FormField</span></code>çš„<code class="docutils literal notranslate"><span class="pre">save</span></code>å›è°ƒï¼Œç”¨äºä¿å­˜è¡¨å•å†…å®¹</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FormState.reset()</span></code>ï¼šè°ƒç”¨æ­¤æ–¹æ³•åï¼Œä¼šå°†å­å­™<code class="docutils literal notranslate"><span class="pre">FormField</span></code>çš„å†…å®¹æ¸…ç©ºã€‚</p></li>
</ul>
</div>
<div class="section" id="id10">
<h3>ç¤ºä¾‹<a class="headerlink" href="#id10" title="Permalink to this headline">Â¶</a></h3>
<p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢ç”¨æˆ·ç™»å½•çš„ç¤ºä¾‹ï¼Œåœ¨æäº¤ä¹‹å‰æ ¡éªŒï¼š</p>
<ol class="simple">
<li><p>ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™æç¤ºâ€œç”¨æˆ·åä¸èƒ½ä¸ºç©ºâ€ã€‚</p></li>
<li><p>å¯†ç ä¸èƒ½å°äº6ä½ï¼Œå¦‚æœå°äº6ä¸ºåˆ™æç¤ºâ€œå¯†ç ä¸èƒ½å°‘äº6ä½â€ã€‚</p></li>
</ol>
<p>å®Œæ•´ä»£ç ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span>class FormTestRoute extends StatefulWidget {
  @override
  _FormTestRouteState createState() =&gt; new _FormTestRouteState();
}

class _FormTestRouteState extends State&lt;FormTestRoute&gt; {
  TextEditingController _unameController = new TextEditingController();
  TextEditingController _pwdController = new TextEditingController();
  GlobalKey _formKey= new GlobalKey&lt;FormState&gt;();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title:Text(&quot;Form Test&quot;),
      ),
      body: Padding(
        padding: const EdgeInsets.symmetric(vertical: 16.0, horizontal: 24.0),
        child: Form(
          key: _formKey, //è®¾ç½®globalKeyï¼Œç”¨äºåé¢è·å–FormState
          autovalidate: true, //å¼€å¯è‡ªåŠ¨æ ¡éªŒ
          child: Column(
            children: &lt;Widget&gt;[
              TextFormField(
                  autofocus: true,
                  controller: _unameController,
                  decoration: InputDecoration(
                      labelText: &quot;ç”¨æˆ·å&quot;,
                      hintText: &quot;ç”¨æˆ·åæˆ–é‚®ç®±&quot;,
                      icon: Icon(Icons.person)
                  ),
                  // æ ¡éªŒç”¨æˆ·å
                  validator: (v) {
                    return v
                        .trim()
                        .length &gt; 0 ? null : &quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;;
                  }

              ),
              TextFormField(
                  controller: _pwdController,
                  decoration: InputDecoration(
                      labelText: &quot;å¯†ç &quot;,
                      hintText: &quot;æ‚¨çš„ç™»å½•å¯†ç &quot;,
                      icon: Icon(Icons.lock)
                  ),
                  obscureText: true,
                  //æ ¡éªŒå¯†ç 
                  validator: (v) {
                    return v
                        .trim()
                        .length &gt; 5 ? null : &quot;å¯†ç ä¸èƒ½å°‘äº6ä½&quot;;
                  }
              ),
              // ç™»å½•æŒ‰é’®
              Padding(
                padding: const EdgeInsets.only(top: 28.0),
                child: Row(
                  children: &lt;Widget&gt;[
                    Expanded(
                      child: RaisedButton(
                        padding: EdgeInsets.all(15.0),
                        child: Text(&quot;ç™»å½•&quot;),
                        color: Theme
                            .of(context)
                            .primaryColor,
                        textColor: Colors.white,
                        onPressed: () {
                          //åœ¨è¿™é‡Œä¸èƒ½é€šè¿‡æ­¤æ–¹å¼è·å–FormStateï¼Œcontextä¸å¯¹
                          //print(Form.of(context));
                            
                          // é€šè¿‡_formKey.currentState è·å–FormStateåï¼Œ
                          // è°ƒç”¨validate()æ–¹æ³•æ ¡éªŒç”¨æˆ·åå¯†ç æ˜¯å¦åˆæ³•ï¼Œæ ¡éªŒ
                          // é€šè¿‡åå†æäº¤æ•°æ®ã€‚ 
                          if((_formKey.currentState as FormState).validate()){
                            //éªŒè¯é€šè¿‡æäº¤æ•°æ®
                          }
                        },
                      ),
                    ),
                  ],
                ),
              )
            ],
          ),
        ),
      ),
    );
  }
}
</pre></div>
</div>
<p>è¿è¡Œåæ•ˆæœå¦‚å›¾3-29æ‰€ç¤ºï¼š</p>
<p><img alt="å›¾3-29" src="../_images/3-29.png" /></p>
<p>æ³¨æ„ï¼Œç™»å½•æŒ‰é’®çš„<code class="docutils literal notranslate"><span class="pre">onPressed</span></code>æ–¹æ³•ä¸­ä¸èƒ½é€šè¿‡<code class="docutils literal notranslate"><span class="pre">Form.of(context)</span></code>æ¥è·å–ï¼ŒåŸå› æ˜¯ï¼Œæ­¤å¤„çš„<code class="docutils literal notranslate"><span class="pre">context</span></code>ä¸º<code class="docutils literal notranslate"><span class="pre">FormTestRoute</span></code>çš„contextï¼Œè€Œ<code class="docutils literal notranslate"><span class="pre">Form.of(context)</span></code>æ˜¯æ ¹æ®æ‰€æŒ‡å®š<code class="docutils literal notranslate"><span class="pre">context</span></code>å‘æ ¹å»æŸ¥æ‰¾ï¼Œè€Œ<code class="docutils literal notranslate"><span class="pre">FormState</span></code>æ˜¯åœ¨<code class="docutils literal notranslate"><span class="pre">FormTestRoute</span></code>çš„å­æ ‘ä¸­ï¼Œæ‰€ä»¥ä¸è¡Œã€‚æ­£ç¡®çš„åšæ³•æ˜¯é€šè¿‡<code class="docutils literal notranslate"><span class="pre">Builder</span></code>æ¥æ„å»ºç™»å½•æŒ‰é’®ï¼Œ<code class="docutils literal notranslate"><span class="pre">Builder</span></code>ä¼šå°†<code class="docutils literal notranslate"><span class="pre">widget</span></code>èŠ‚ç‚¹çš„<code class="docutils literal notranslate"><span class="pre">context</span></code>ä½œä¸ºå›è°ƒå‚æ•°ï¼š</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">Expanded</span><span class="p">(</span>
 <span class="c1">// é€šè¿‡Builderæ¥è·å–RaisedButtonæ‰€åœ¨widgetæ ‘çš„çœŸæ­£context(Element) </span>
  <span class="nl">child:</span><span class="n">Builder</span><span class="p">(</span><span class="nl">builder:</span> <span class="p">(</span><span class="n">context</span><span class="p">){</span>
    <span class="k">return</span> <span class="n">RaisedButton</span><span class="p">(</span>
      <span class="p">...</span>
      <span class="nl">onPressed:</span> <span class="p">()</span> <span class="p">{</span>
        <span class="c1">//ç”±äºæœ¬widgetä¹Ÿæ˜¯Formçš„å­ä»£widgetï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼è·å–FormState  </span>
        <span class="k">if</span><span class="p">(</span><span class="n">Form</span><span class="p">.</span><span class="n">of</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">validate</span><span class="p">()){</span>
          <span class="c1">//éªŒè¯é€šè¿‡æäº¤æ•°æ®</span>
        <span class="p">}</span>
      <span class="p">},</span>
    <span class="p">);</span>
  <span class="p">})</span>
<span class="p">)</span>
</pre></div>
</div>
<p>å…¶å®<code class="docutils literal notranslate"><span class="pre">context</span></code>æ­£æ˜¯æ“ä½œWidgetæ‰€å¯¹åº”çš„<code class="docutils literal notranslate"><span class="pre">Element</span></code>çš„ä¸€ä¸ªæ¥å£ï¼Œç”±äºWidgetæ ‘å¯¹åº”çš„<code class="docutils literal notranslate"><span class="pre">Element</span></code>éƒ½æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥<code class="docutils literal notranslate"><span class="pre">context</span></code>ä¹Ÿéƒ½æ˜¯ä¸åŒçš„ï¼Œæœ‰å…³<code class="docutils literal notranslate"><span class="pre">context</span></code>çš„æ›´å¤šå†…å®¹ä¼šåœ¨åé¢é«˜çº§éƒ¨åˆ†è¯¦ç»†è®¨è®ºã€‚Flutterä¸­æœ‰å¾ˆå¤šâ€œof(context)â€è¿™ç§æ–¹æ³•ï¼Œè¯»è€…åœ¨ä½¿ç”¨æ—¶ä¸€å®šè¦æ³¨æ„<code class="docutils literal notranslate"><span class="pre">context</span></code>æ˜¯å¦æ­£ç¡®ã€‚</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">flutter in action</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, mahongquan.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/chapter3/input_and_form.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>